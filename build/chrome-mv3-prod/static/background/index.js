var e,t;"function"==typeof(e=globalThis.define)&&(t=e,e=null),function(t,n,o,r,a){var c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i="function"==typeof c[r]&&c[r],s=i.cache||{},u="undefined"!=typeof module&&"function"==typeof module.require&&module.require.bind(module);function l(e,n){if(!s[e]){if(!t[e]){var o="function"==typeof c[r]&&c[r];if(!n&&o)return o(e,!0);if(i)return i(e,!0);if(u&&"string"==typeof e)return u(e);var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}f.resolve=function(n){var o=t[e][1][n];return null!=o?o:n},f.cache={};var d=s[e]=new l.Module(e);t[e][0].call(d.exports,f,d,d.exports,this)}return s[e].exports;function f(e){var t=f.resolve(e);return!1===t?{}:l(t)}}l.isParcelRequire=!0,l.Module=function(e){this.id=e,this.bundle=l,this.exports={}},l.modules=t,l.cache=s,l.parent=i,l.register=function(e,n){t[e]=[function(e,t){t.exports=n},{}]},Object.defineProperty(l,"root",{get:function(){return c[r]}}),c[r]=l;for(var d=0;d<n.length;d++)l(n[d]);if(o){var f=l(o);"object"==typeof exports&&"undefined"!=typeof module?module.exports=f:"function"==typeof e&&e.amd?e(function(){return f}):a&&(this[a]=f)}}({kgW6q:[function(e,t,n){e("../../../src/background")},{"../../../src/background":"fx8Od"}],fx8Od:[function(e,t,n){var o=e("~/lib/contacts");let r="whatsapp-send-root",a="whatsapp-manage",c="whatsapp-contact-",i=["selection","page","editable"],s=()=>new Promise(e=>{chrome.contextMenus.removeAll(()=>e())}),u=(e,t)=>{let n=(0,o.normalizePhone)(e),r=encodeURIComponent(t||"");return`whatsapp://send?phone=${n}&text=${r}`},l=async()=>{await s(),chrome.contextMenus.create({id:r,title:"Send to WhatsApp",contexts:i});let e=await (0,o.readContacts)();0===e.length?chrome.contextMenus.create({id:"whatsapp-empty",parentId:r,title:"No contacts yet",enabled:!1,contexts:i}):e.forEach(e=>{chrome.contextMenus.create({id:`${c}${e.id}`,parentId:r,title:e.name,contexts:i})}),chrome.contextMenus.create({id:a,parentId:r,title:"Manage contacts...",contexts:i})},d=async e=>{if(!e.startsWith(c))return null;let t=e.replace(c,""),n=await (0,o.readContacts)();return n.find(e=>e.id===t)??null},f=(e,t)=>{let n=u(e.phone,t);chrome.tabs.create({url:n})},p=()=>{l().catch(e=>{console.error("Failed to create context menus",e)})};chrome.runtime.onInstalled.addListener(()=>{p()}),chrome.runtime.onStartup.addListener(()=>{p()}),chrome.storage.onChanged.addListener((e,t)=>{"sync"===t&&e[o.CONTACTS_STORAGE_KEY]&&p()}),chrome.contextMenus.onClicked.addListener(async e=>{if(e.menuItemId===a){chrome.runtime.openOptionsPage();return}let t=String(e.menuItemId),n=await d(t);if(!n)return;let o=e.selectionText?.trim()??"",r=o||e.pageUrl||"";f(n,r)})},{"~/lib/contacts":"gzKEE"}],gzKEE:[function(e,t,n){var o=e("@parcel/transformer-js/src/esmodule-helpers.js");o.defineInteropFlag(n),o.export(n,"CONTACTS_STORAGE_KEY",()=>r),o.export(n,"normalizePhone",()=>a),o.export(n,"readContacts",()=>c),o.export(n,"writeContacts",()=>i);let r="contacts",a=e=>e.replace(/[^\d]/g,""),c=()=>new Promise(e=>{chrome.storage.sync.get({[r]:[]},t=>{e(t[r]??[])})}),i=e=>new Promise(t=>{chrome.storage.sync.set({[r]:e},()=>{t()})})},{"@parcel/transformer-js/src/esmodule-helpers.js":"hbR2Q"}],hbR2Q:[function(e,t,n){n.interopDefault=function(e){return e&&e.__esModule?e:{default:e}},n.defineInteropFlag=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.exportAll=function(e,t){return Object.keys(e).forEach(function(n){"default"===n||"__esModule"===n||t.hasOwnProperty(n)||Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[n]}})}),t},n.export=function(e,t,n){Object.defineProperty(e,t,{enumerable:!0,get:n})}},{}]},["kgW6q"],"kgW6q","parcelRequiref86e"),globalThis.define=t;